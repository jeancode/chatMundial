<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script>
    
        window.onload =  function(){
            
            var misocket = new WebSocket("ws://localhost/", "protocolOne");
            var timeTemp =  0;
            misocket.onmessage =  function(data){

                var textNode =  document.createElement("p");

                var json =  JSON.parse(data.data);

                textNode.innerHTML = json.mensaje;

                var sleepView =  document.getElementById("sleep");
                
                if(json.server_sleep > 1){
                    json.server_sleep = 0;
                }

                sleepView.innerText = "Espera: " +  json.server_sleep;

                document.querySelector("#conten-view").appendChild(textNode)
            }
            
           

            document.querySelector("#enviar").addEventListener('click',() =>{

                 var  tex = document.getElementById("text").value;

                 misocket.send(tex);
              
            });

        }
    </script>
</head>
<body>
    
    <div>
        <div id="sleep">Espera:0</div>
        <input type="text" id="text">
        <input type="submit" id="enviar">
    </div>

    <div id="conten-view">


    </div>
</body>
</html>